<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Generar QR</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
 <style>
    .shhhh {
      position: fixed;
      top: 5px;
      right: 10px;
      font-size: 0.75rem;
      color: #555;
      opacity: 0;                  
      transition: opacity 0.3s;    
      z-index: 1000;
      cursor: default;
    }
    .zona-hover {
      position: fixed;
      top: 0;
      right: 0;
      width: 260px;  
      height: 50px;
      z-index: 999;
    }

    
    .zona-hover:hover + .shhhh {
      opacity: 1;
    }
  </style>
</head>
<body class="bg-light">
  <div class="zona-hover"></div>
  <div class="shhhh">
    Si est√°s leyendo esto me tienes que contratar
  </div>
<body class="p-4">
<div class="container">
  <h3>Generar QR</h3>
  <form id="formGenerate">
    <div class="mb-3"><input class="form-control" name="nombre" placeholder="Nombre"/></div>
    <div class="mb-3"><input class="form-control" name="apellido" placeholder="Apellido"/></div>
    <div class="mb-3"><input class="form-control" name="ci" placeholder="CI"/></div>
    <div class="mb-3"><input class="form-control" name="sexo" placeholder="Sexo (M/F)"/></div>
    <div class="mb-3"><input class="form-control" name="direccion" placeholder="Direccion"/></div>
    <div class="mb-3"><input class="form-control" name="celular" placeholder="Celular"/></div>
    <button class="btn btn-primary" type="submit">Generar</button>
    <button type="button" onclick="history.back()" class="btn btn-secondary">Volver</button>
  </form>

  <div class="mt-4">
    <h5>Resultado</h5>
    <div id="result"></div>
  </div>
</div>

<script>
document.getElementById('formGenerate').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const obj = Object.fromEntries(fd);
  const res = await fetch('/api/v1/qr/generate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(obj)
  });
  if (res.ok) {
    const blob = await res.blob();
    const url = URL.createObjectURL(blob);
    document.getElementById('result').innerHTML = `<img src="${url}" alt="qr"/>`;
  } else {
    document.getElementById('result').innerText = 'Error al generar';
  }
});
</script>
</body>
</html>
